/*    
 * LeapJS-Plugins Extra - v0.1.6 - 2014-05-14    
 * http://github.com/leapmotion/leapjs-plugins/    
 *    
 * Copyright 2014 LeapMotion, Inc    
 *    
 * Licensed under the Apache License, Version 2.0 (the "License");    
 * you may not use this file except in compliance with the License.    
 * You may obtain a copy of the License at    
 *    
 *     http://www.apache.org/licenses/LICENSE-2.0    
 *    
 * Unless required by applicable law or agreed to in writing, software    
 * distributed under the License is distributed on an "AS IS" BASIS,    
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.    
 * See the License for the specific language governing permissions and    
 * limitations under the License.    
 *    
 */    
(function(){Leap.Controller.plugin("proximityAlert",function(a){var b,c,d,e,f,g,h,i,j,k,l;return null==a&&(a={}),a.beepFrq||(a.beepFrq=1318.51),a.continuousFrq||(a.continuousFrq=1396.91),a.waveType||(a.waveType=0),a.beepDuration||(a.beepDuration=function(a){return Math.pow(.7-a,3)}),a.minBeepDuration||(a.minBeepDuration=.02),c=new webkitAudioContext,g=c.createPanner(),e=c.createGain(),e.connect(c.destination),g.connect(e),a.setVolume=function(a){return e.gain.value=a},f=function(b,d){var e;return e=c.createOscillator(),e.type=a.waveType,e.connect(g),e.frequency.value=b,e.start(0),d&&e.stop(c.currentTime+d),e},j=void 0,b=void 0,h=function(a,d){var e;if(e=d/2,1/0===j)b.stop(0),b=null;else if(c.currentTime<j)return;return b=f(a,d),j=c.currentTime+d+e},i=function(a){return c.currentTime<j?void 0:(b=f(a),b.continuous=!0,j=1/0)},l=function(){return b&&b.continuous?(b.stop(0),b=void 0,j=void 0):void 0},d=function(a,b){return a>b[1]?a-b[1]:a<b[0]?b[0]-a:!1},k=function(a){return g.setPosition(a.stabilizedPalmPosition[0]/100,a.stabilizedPalmPosition[1]/100,a.stabilizedPalmPosition[2]/100)},this.on("handLost",function(){return l()}),{hand:function(b){var c,e,f,g,j,m,n;if(f=b.frame.interactionBox){for(g=f.normalizePoint(b.palmPosition),m=0,n=g.length;n>m;m++)if(j=g[m],c=d(j,[0,1]))return b.proximity=!0,k(b),e=a.beepDuration(c),void(e<a.minBeepDuration?i(a.continuousFrq):h(a.beepFrq,e));return l()}}}})}).call(this);